(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"7UCR":function(e,t,n){"use strict";n.r(t),n.d(t,"UserModule",(function(){return w}));var r=n("PCNd"),o=n("tyNb"),i=n("/vdw"),s=n("3Pt+"),c=n("IzEk"),a=n("fXoL"),b=n("e0Ib");let u=(()=>{class e{constructor(e,t,n){this.mygoService=e,this.router=t,this.route=n,this.form=(new s.b).group({password:["",s.m.required],confirmPassword:["",s.m.required],hash:[""]})}ngOnInit(){this.route.params.pipe(Object(c.a)(1)).subscribe(e=>{this.form.get("hash").setValue(e.hashId)})}submit(){const{hash:e,password:t,confirmPassword:n}=this.form.value;if(t!==n)return alert("Senhas diferentes");this.mygoService.changePassword(e,t,n).pipe(Object(c.a)(1)).subscribe(e=>{e.success?(alert("Senha alterada com sucesso"),this.backToLogin()):alert(e.errors.join("|"))},e=>{alert(e.error.errors.join("|"))})}backToLogin(){this.router.navigate(["/user/login"])}}return e.\u0275fac=function(t){return new(t||e)(a.Hb(b.a),a.Hb(o.b),a.Hb(o.a))},e.\u0275cmp=a.Bb({type:e,selectors:[["app-change-password"]],decls:14,vars:2,consts:[[1,"change-password-container",3,"formGroup","submit"],["type","text","formControlName","password"],["type","text","formControlName","confirmPassword"],["type","submit",3,"disabled"],["type","button",3,"click"]],template:function(e,t){1&e&&(a.Kb(0,"form",0),a.Rb("submit",(function(){return t.submit()})),a.Kb(1,"div"),a.Kb(2,"span"),a.ec(3,"Nova senha"),a.Jb(),a.Ib(4,"input",1),a.Jb(),a.Kb(5,"div"),a.Kb(6,"span"),a.ec(7,"Confirmar senha"),a.Jb(),a.Ib(8,"input",2),a.Jb(),a.Kb(9,"div"),a.Kb(10,"button",3),a.ec(11,"Enviar email"),a.Jb(),a.Kb(12,"button",4),a.Rb("click",(function(){return t.backToLogin()})),a.ec(13,"Voltar"),a.Jb(),a.Jb(),a.Jb()),2&e&&(a.Wb("formGroup",t.form),a.xb(10),a.Wb("disabled",!t.form.valid))},directives:[s.o,s.i,s.f,s.a,s.h,s.e],styles:[".change-password-container[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center}"]}),e})(),l=(()=>{class e{constructor(e,t){this.mygoService=e,this.router=t,this.form=(new s.b).group({email:[""]})}ngOnInit(){}sendEmail(){const{email:e}=this.form.value;this.mygoService.forgotPassword(e).pipe(Object(c.a)(1)).subscribe(e=>{e.success?alert("Foi enviado para seu email um link para criar uma nova senha"):alert(e.errors.join("|"))},e=>{alert(e.error.errors.join("|"))})}backToLogin(){this.router.navigate(["/user/login"])}}return e.\u0275fac=function(t){return new(t||e)(a.Hb(b.a),a.Hb(o.b))},e.\u0275cmp=a.Bb({type:e,selectors:[["app-forgot-password"]],decls:10,vars:1,consts:[[1,"forgot-password-container",3,"formGroup","submit"],["type","text","formControlName","email"],["type","submit"],["type","button",3,"click"]],template:function(e,t){1&e&&(a.Kb(0,"form",0),a.Rb("submit",(function(){return t.sendEmail()})),a.Kb(1,"div"),a.Kb(2,"span"),a.ec(3,"Email"),a.Jb(),a.Ib(4,"input",1),a.Jb(),a.Kb(5,"div"),a.Kb(6,"button",2),a.ec(7,"Enviar email"),a.Jb(),a.Kb(8,"button",3),a.Rb("click",(function(){return t.backToLogin()})),a.ec(9,"Voltar"),a.Jb(),a.Jb(),a.Jb()),2&e&&a.Wb("formGroup",t.form)},directives:[s.o,s.i,s.f,s.a,s.h,s.e],styles:[".forgot-password-container[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center}"]}),e})();var g=n("ofXK");function m(e,t){if(1&e&&(a.Kb(0,"section"),a.Kb(1,"h1"),a.ec(2,"Usuario"),a.Jb(),a.Kb(3,"p"),a.ec(4),a.Jb(),a.Kb(5,"p"),a.ec(6),a.Jb(),a.Kb(7,"p"),a.ec(8),a.Jb(),a.Kb(9,"p"),a.ec(10),a.Jb(),a.Jb()),2&e){const e=a.Tb();a.xb(4),a.gc("ID: ",e.user._id,""),a.xb(2),a.gc("Username: ",e.user.username,""),a.xb(2),a.gc("Nome: ",e.user.name,""),a.xb(2),a.gc("Email: ",e.user.email,"")}}function p(e,t){if(1&e){const e=a.Lb();a.Kb(0,"p"),a.ec(1),a.Kb(2,"button",1),a.Rb("click",(function(){a.ac(e);const n=t.$implicit;return a.Tb().editDeck(n)})),a.ec(3,"Editar deck"),a.Jb(),a.Jb()}if(2&e){const e=t.$implicit;a.xb(1),a.hc(" ",e.name," ( ",e.createdBy," ) ")}}let d=(()=>{class e{constructor(e,t){this.mygoService=e,this.router=t,this.decks=[]}ngOnInit(){this.getUser()}getUser(){this.mygoService.user().pipe(Object(c.a)(1)).subscribe(e=>{this.user=e.user,this.getDecks()},e=>{alert(e.error.errors.join("|")),this.mygoService.logout(),this.router.navigate(["/user/login"])})}getDecks(){this.mygoService.myDecks().pipe(Object(c.a)(1)).subscribe(e=>{this.decks=e.decks},e=>{alert(e.error.errors.join("|"))})}editDeck(e){this.router.navigate(["/deck/"+e._id])}myCards(){this.router.navigate(["/mycards"])}}return e.\u0275fac=function(t){return new(t||e)(a.Hb(b.a),a.Hb(o.b))},e.\u0275cmp=a.Bb({type:e,selectors:[["app-home"]],decls:10,vars:2,consts:[[4,"ngIf"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(a.dc(0,m,11,4,"section",0),a.Ib(1,"br"),a.Kb(2,"section"),a.Kb(3,"button",1),a.Rb("click",(function(){return t.myCards()})),a.ec(4,"Minhas cartas"),a.Jb(),a.Jb(),a.Ib(5,"br"),a.Kb(6,"section"),a.Kb(7,"h1"),a.ec(8,"Decks"),a.Jb(),a.dc(9,p,4,2,"p",2),a.Jb()),2&e&&(a.Wb("ngIf",t.user),a.xb(9),a.Wb("ngForOf",t.decks))},directives:[g.j,g.i],styles:[""]}),e})();var h=n("xrvM");const f=function(){return["/user/forgot-password"]},v=[{path:"",redirectTo:"home"},{path:"login",component:(()=>{class e{constructor(e,t,n,r){this.mygoService=e,this.router=t,this.formBuilder=n,this.themeService=r,this.form=this.formBuilder.group({username:[""],password:[""]})}ngOnInit(){localStorage.getItem("token")&&this.mygoService.verifyToken().pipe(Object(c.a)(1)).subscribe(e=>{e.success&&this.loginComplete(!1)})}login(){this.mygoService.login(this.form.get("username").value,this.form.get("password").value).pipe(Object(c.a)(1)).subscribe(e=>{e.success&&(localStorage.setItem("token",e.token),this.loginComplete(!0))},e=>{alert(e.error.errors.join(" | "))})}loginComplete(e){const t=localStorage.getItem("temptheme");t&&e&&this.themeService.saveTheme(t),this.router.navigate(["/user/home"])}register(){this.router.navigate(["/user/register"])}}return e.\u0275fac=function(t){return new(t||e)(a.Hb(b.a),a.Hb(o.b),a.Hb(s.b),a.Hb(h.a))},e.\u0275cmp=a.Bb({type:e,selectors:[["app-login"]],decls:18,vars:6,consts:[[1,"login",3,"formGroup","submit"],[1,"login-container"],["src","assets/images/logo.png","alt","",1,"logo"],[1,"mygo-input"],["for","username"],["id","username","type","text","placeholder","Usu\xe1rio",3,"formControl"],["for","password"],["id","password","type","password","placeholder","Senha",3,"formControl"],[1,"buttons"],["type","submit",1,"mygo-button",3,"disabled"],["type","button",1,"mygo-button",3,"click"],[1,"mygo-anchor",3,"routerLink"]],template:function(e,t){1&e&&(a.Kb(0,"form",0),a.Rb("submit",(function(){return t.login()})),a.Kb(1,"div",1),a.Ib(2,"img",2),a.Kb(3,"div",3),a.Kb(4,"label",4),a.ec(5,"Usu\xe1rio"),a.Jb(),a.Ib(6,"input",5),a.Jb(),a.Kb(7,"div",3),a.Kb(8,"label",6),a.ec(9,"Senha"),a.Jb(),a.Ib(10,"input",7),a.Jb(),a.Kb(11,"div",8),a.Kb(12,"button",9),a.ec(13,"Login"),a.Jb(),a.Kb(14,"button",10),a.Rb("click",(function(){return t.register()})),a.ec(15,"Registrar"),a.Jb(),a.Kb(16,"a",11),a.ec(17,"Esqueceu sua senha?"),a.Jb(),a.Jb(),a.Jb(),a.Jb()),2&e&&(a.Wb("formGroup",t.form),a.xb(6),a.Wb("formControl",t.form.get("username")),a.xb(4),a.Wb("formControl",t.form.get("password")),a.xb(2),a.Wb("disabled",!t.form.valid),a.xb(4),a.Wb("routerLink",a.Xb(5,f)))},directives:[s.o,s.i,s.f,s.a,s.h,s.d,o.c],styles:[".login[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column;background-image:var(--loginBg);background-repeat:no-repeat;background-position:bottom;background-position-x:5vw}.login[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]{padding:20px;display:grid;grid-template-columns:1fr;gap:10px;width:400px;position:fixed;right:25vw}.login[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{width:100%}.login[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .mygo-input[_ngcontent-%COMP%]{display:flex;align-items:center}.login[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .mygo-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100px}.login[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .mygo-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:260px}.login[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{margin-top:20px;display:grid;grid-template-columns:1fr 1fr;gap:20px}.login[_ngcontent-%COMP%]   .login-container[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{grid-column:1/span 2;text-align:center}"]}),e})()},{path:"register",component:(()=>{class e{constructor(e,t){this.mygoService=e,this.router=t,this.user=(new s.b).group({name:[""],email:[""],username:[""],password:[""]})}ngOnInit(){}register(){this.mygoService.register(this.user.get("name").value,this.user.get("email").value,this.user.get("username").value,this.user.get("password").value).pipe(Object(c.a)(1)).subscribe(e=>{e.success?(this.backToLogin(),alert("Usu\xe1rio criado com sucesso")):alert(e.errors.join("|"))},e=>{alert(e.error.errors.join("|"))})}backToLogin(){this.router.navigate(["/user/login"])}}return e.\u0275fac=function(t){return new(t||e)(a.Hb(b.a),a.Hb(o.b))},e.\u0275cmp=a.Bb({type:e,selectors:[["app-register"]],decls:27,vars:2,consts:[[1,"register-container",3,"formGroup","submit"],["type","text","formControlName","name"],["type","text","formControlName","email"],["type","text","formControlName","username"],["type","password","formControlName","password"],["type","submit",3,"disabled"],[3,"click"]],template:function(e,t){1&e&&(a.Kb(0,"form",0),a.Rb("submit",(function(){return t.register()})),a.Kb(1,"div"),a.Kb(2,"span"),a.ec(3,"Nome"),a.Jb(),a.Ib(4,"input",1),a.Jb(),a.Ib(5,"br"),a.Kb(6,"div"),a.Kb(7,"span"),a.ec(8,"Email"),a.Jb(),a.Ib(9,"input",2),a.Jb(),a.Ib(10,"br"),a.Kb(11,"div"),a.Kb(12,"span"),a.ec(13,"Usu\xe1rio"),a.Jb(),a.Ib(14,"input",3),a.Jb(),a.Ib(15,"br"),a.Kb(16,"div"),a.Kb(17,"span"),a.ec(18,"Senha"),a.Jb(),a.Ib(19,"input",4),a.Jb(),a.Ib(20,"br"),a.Kb(21,"div"),a.Kb(22,"button",5),a.ec(23,"Criar conta"),a.Jb(),a.ec(24," \xa0 "),a.Kb(25,"button",6),a.Rb("click",(function(){return t.backToLogin()})),a.ec(26,"Voltar"),a.Jb(),a.Jb(),a.Jb()),2&e&&(a.Wb("formGroup",t.user),a.xb(22),a.Wb("disabled",!t.user.valid))},directives:[s.o,s.i,s.f,s.a,s.h,s.e],styles:[".register-container[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;align-items:center;justify-content:center;flex-direction:column}"]}),e})()},{path:"forgot-password",component:l},{path:"change-password/:hashId",component:u},{path:"home",component:d,canActivate:[i.a]}];let y=(()=>{class e{}return e.\u0275mod=a.Fb({type:e}),e.\u0275inj=a.Eb({factory:function(t){return new(t||e)},imports:[[o.d.forChild(v)],o.d]}),e})(),w=(()=>{class e{}return e.\u0275mod=a.Fb({type:e}),e.\u0275inj=a.Eb({factory:function(t){return new(t||e)},imports:[[r.a,y]]}),e})()}}]);